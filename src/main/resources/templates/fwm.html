<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <title>食品ロス管理アプリ</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  </head>
  <body>
    <header>
      <style>
        header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          background-color: #4CAF50;
          color: white;
          padding: 10px 20px;
        }
        nav {
          margin-left: auto;
        }
        nav a {
          color: white;
          text-decoration: none;
          margin: 0 15px;
          font-size: 24px;
        }
        footer {
          background-color: #333;
          color: white;
          text-align: center;
          padding: 10px 0;
        }
        form.search-form {
          margin-left: auto;
          display: flex;
          align-items: center;
        }
        form.search-form input {
          margin-right: 10px;
          padding: 5px;
          font-size: 16px;
        }
      </style>
      <h1>食品ロス管理アプリ</h1>
      <nav>
        <a href="/fwm">ホーム</a>
        <a href="/register">商品登録</a>
        <a href="#recipe">レシピ</a>
      </nav>
      <!-- 検索フォームを追加 -->
      <form class="search-form" action="/search" method="post">
        <input type="text" name="keyword" placeholder="検索キーワード" required />
        <button type="submit" class="btn btn-light">検索</button>
      </form>
    </header>

    <h1>食材一覧</h1>
    <div class="container">
      <table class="table table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>image<br />画像</th>
            <th>delete<br />削除ボタン</th>
            <th>Name<br />(商品名)</th>
            <th>Pdate<br />(購入日)</th>
            <th>Edate<br />(賞味期限)</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="ing : ${fwm.getIngs()}">
            <td>
              <a th:href="@{/registered(id=${ing.getId()})}">
                <img th:src="@{/images/{filename}(filename=${ing.getFName()})}" alt="商品画像" style="max-width: 100%; max-height: 150px; width: auto; height: auto;" />
              </a>
            </td>
            <td><a th:href="@{/delete(id=${ing.getId()})}">削除</a></td>
            <td th:text="${ing.getPName()}"></td>
            <td th:text="${ing.getPdate()}"></td>
            <td th:text="${ing.getEdate()}"></td>
          </tr>
        </tbody>
      </table>

      <h1>賞味期限の近い食材一覧</h1>
      <div class="container">
        <table class="table table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>image<br />画像</th>
              <th>delete<br />削除ボタン</th>
              <th>Name<br />(商品名)</th>
              <th>Pdate<br />(購入日)</th>
              <th>Edate<br />(賞味期限)</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="ing : ${fwm.getExpiringIngs(2)}">
              <td>
                <a th:href="@{/registered(id=${ing.getId()})}">
                  <img th:src="@{/images/{filename}(filename=${ing.getFName()})}" alt="商品画像" style="width: 200px; height: auto;" />
                </a>
              </td>
              <td><a th:href="@{/delete(id=${ing.getId()})}">削除</a></td>
              <td th:text="${ing.getPName()}"></td>
              <td th:text="${ing.getPdate()}"></td>
              <td th:text="${ing.getEdate()}"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <footer>
      <p>知能プログラミング演習Ⅱ グループ04</p>
    </footer>
  </body>
</html>
